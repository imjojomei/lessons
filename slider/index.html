<!DOCTYPE html>
<html>
	<head>
	<link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet">
	<link href="https://use.fontawesome.com/releases/v5.0.7/css/all.css" rel="stylesheet">
	<meta charset="utf-8" />
	<style type="text/css">
		* {box-sizing: border-box}
		body {
			font-family: 'Open Sans', sans-serif;
			margin: 0;
		}
		
		.mySlides {display: none;}

		h3 {
			margin: 0;
			font-size: 16px;
			font-weight: normal;
		}

		.full-slideshow {
			width: 100%;
			height: 100%;
			position:fixed;
			border: 1px solid #999999;
		}

		#slideshow-container {
		  width:85%;
		  position: relative;
		  float: left;
		}

		.img-container {
			width: 60%;
			float: left;
			text-align: center;
			margin: 50px 0;
		}

		.img-container img { width: 50%; }

		.counter {
			position: absolute;
	    right: -105px;
	    top: 45px;
	    width: 50%;
		}

		.numbertext {
		  color: #e50e63;
		  font-size: 18px;
		  padding: 8px 12px;
		  display: inline-block;
		  width: 90px;
		}

		.numbertext span {
			font-size: 24px;
			vertical-align: top;
		  font-weight: bold;
		}

		.arrows {display:inline-block;}
		.prev, .next {
		  cursor: pointer;
		  top: 50%;
		  width: auto;
		  padding: 5px;
		  margin-top: -22px;
		  color: #e50e63;
		  font-weight: bold;
		  font-size: 18px;
		  transition: 0.6s ease;
		}

		.description {
			width: 40%;
			float:right;
			margin-top: 120px;
		}

		.clearfix {clear: both;}

		.text {
		  color: #333333;
		  font-size: 15px;
		  padding: 8px 12px;
		  bottom: 8px;
		  width: 100%;
		}

		#related-container {
			width: 15%;
			float: right;
			height:100%;
			overflow: auto;
			border-left: 1px solid #999999;
			padding: 30px;
			text-align: center;
			font-size: 12px;
		}

		#related-container .header {
			border-bottom: 1px dashed #999999;
			display: inline-block;
			margin-bottom: 30px;
		}

		.article {
			padding: 20px 0;
			border-bottom: 1px solid #999999;
		}

		.article:last-child { border: 0; }

		.article img {width: 100%;}

		.category {
			text-transform: uppercase;
			font-weight: bold;
			color: #e50e63;
			display: block;
			margin: 6px 0;
		}

		.fade {
		  -webkit-animation-name: fade;
		  -webkit-animation-duration: 1.5s;
		  animation-name: fade;
		  animation-duration: 1.5s;
		}

		@-webkit-keyframes fade {
		  from {opacity: .4} 
		  to {opacity: 1}
		}

		@keyframes fade {
		  from {opacity: .4} 
		  to {opacity: 1}
		}

	</style>
</head>
	
<body>

	<header>
	</header>

	<section>
	</section>


	<div class="full-slideshow">
		<div id="slideshow-container">
			<div class="counter">
				<div class="numbertext"><span>1</span> /10</div>
				<div class="arrows">
					<a class="prev" onclick="plusSlides(-1)">&#10094;</a>
					<a class="next" onclick="plusSlides(1)">&#10095;</a>
				</div>
			</div>
		
		</div>
		<div id="related-container">
			<div class="header"><h3>Related Galleries</h3></div>
		</div>
	</div>

	<script type="text/javascript">
		var requestURL = 'articles.json';

		var request = new XMLHttpRequest();
		request.open('GET', requestURL);
		request.responseType = 'json';
		request.send();

		request.onreadystatechange = function() {
      if (request.readyState == 4 && request.status == "200") {
      }
    }

		request.onload = function() {
		  var articles = request.response;
		  populateHeader(articles);
		  // showHeroes(articles);
		}

		function populateHeader(jsonObj) {
		  var articles = jsonObj['articles'];
		  //console.log(articles);
		  var slideshowContainer = document.getElementById('slideshow-container');

		  var gallery = articles[0].gallery;

		  for (var i = 0; i < gallery.length; i++) {
			  var element = document.createElement("div");
			  element.classList.add('mySlides');
			  element.style.display = "block";  
		    element.insertAdjacentHTML("beforeend", "<div class='img-container fade'><div class='img'><img src='" + gallery[i].image.src +" '></div></div>");
		    element.insertAdjacentHTML("beforeend", "<div class='description fade'>"+ gallery[i].image.description + "</div>");
		    element.insertAdjacentHTML("beforeend", "<div class='clearfix'></div>");

		    document.getElementById('slideshow-container').appendChild(element);
		  }

		  console.log(articles);

		  for(var a=0; a < articles.length; a++) {
		  	var item = document.createElement("div");
			  item.classList.add('article');
		    item.insertAdjacentHTML("beforeend", "<img src='" + articles[a].gallery[0].image.src +" '>");
		    item.insertAdjacentHTML("beforeend", "<span class='category'>"+ articles[a].articleCategory + "</span>");
		    item.insertAdjacentHTML("beforeend", "<span class='clearfix'>"+ articles[a].articleTitle + "</span>");

		    document.getElementById('related-container').appendChild(item);
		  }
		}

		var slideIndex = 1;
		showSlides(slideIndex);

		function plusSlides(n) {
		  showSlides(slideIndex += n);
		  var counter = document.getElementsByClassName('numbertext')[0];
		  var slides = document.getElementsByClassName("mySlides");
		  counter.innerHTML = "<span>" + slideIndex + "</span> /" + slides.length;
		 // console.log(slides.length);
		}

		function currentSlide(n) {
		  showSlides(slideIndex = n);
		}

		function showSlides(n) {
		  var i;
		  var slides = document.getElementsByClassName("mySlides");
		  var dots = document.getElementsByClassName("dot");
		  if (n > slides.length) {slideIndex = 1}    
		  if (n < 1) {slideIndex = slides.length}
		  for (i = 0; i < slides.length; i++) {
		      slides[i].style.display = "none";  
		  }
		 
		  slides[slideIndex-1].style.display = "block";  
		}

	</script>

</body>
</html>